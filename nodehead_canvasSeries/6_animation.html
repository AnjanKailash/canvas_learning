<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Animation</title>
</head>
<body>
    <canvas id="canvas" style="width: 800px; height: 600px; border: 1px solid">
        Sorry, your browser does not support the canvas tag
    </canvas>

    <script>
        //cache a reference to the html element
        var canvas = document.getElementById('canvas');

        //set the drawing surface dimensions to match the canvas
        canvas.width = canvas.scrollWidth;
        canvas.height = canvas.scrollHeight;

        //Get a reference to the 2nd drawing context/ api
        var ctx = canvas.getContext('2d');

        //creae a rectagle
        var rectangles = [
            { x: 0, y: 0, width: 100, height: 100, color: 'red', speedX: 1},
            { x: 0, y: 100, width: 100, height: 100, color: 'green', speedX: 2},
            { x: 0, y: 200, width: 100, height: 100, color: 'blue', speedX: 3}
        ];
        
        ctx.fillStyle = 'red';
        
        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            rectangles.forEach((rectangle, index) => {
                ctx.fillStyle = rectangle.color;
                ctx.fillRect(rectangle.x, rectangle.y, rectangle.width, rectangle.height);
                rectangle.x+=rectangle.speedX;
            });
        
            //by default it will call at 60 ms --> do not use setInterval
            window.requestAnimationFrame(update);
        }

        update();

    </script>
</body>
</html>